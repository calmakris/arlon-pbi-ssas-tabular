{
  "name": "Gross Sales Budget",
  "description": "Monthly gross sales plan per sales territory as provided by Commercial Leadership Team (CLT)",
  "expression": [
    " ",
    "VAR _IsFilteredByPerson =",
    "    ISFILTERED( 'Customer Master'[Sales Person] )",
    "        || ISFILTERED( 'Customer Master'[Sales Person Code] )",
    "        || ISFILTERED( 'Customer Master'[Sales Territory] )",
    "        || ISFILTERED( 'Customer Master'[Sales Territory Name] )",
    "",
    "VAR _BySalesPerson =",
    "    CALCULATE(",
    "        SUM( TARGET_Sales[GrossSales] ),",
    "        TREATAS(",
    "            VALUES( 'Customer Master'[Sales Organization] ),",
    "            TARGET_Sales[LocationKey]",
    "        ),",
    "        TREATAS(",
    "            VALUES( 'Customer Master'[Sales Person Code] ),",
    "            TARGET_Sales[SalesPersonKey]",
    "        ),",
    "        TREATAS(",
    "            VALUES( 'Calendar'[Year_Month_Sort_Key] ),",
    "            TARGET_Sales[CalendarTimeKey]",
    "        )",
    "    )",
    "",
    "VAR _ByRegion =",
    "    CALCULATE(",
    "        SUM( TARGET_Sales[GrossSales] ),",
    "        TREATAS(",
    "            VALUES( 'Customer Master'[Sales Organization] ),",
    "            TARGET_Sales[LocationKey]",
    "        ),",
    "        TREATAS(",
    "            VALUES( 'Customer Master'[Sales Region] ),",
    "            TARGET_Sales[SalesPersonKey]",
    "        ),",
    "        TREATAS(",
    "            VALUES( 'Calendar'[Year_Month_Sort_Key] ),",
    "            TARGET_Sales[CalendarTimeKey]",
    "        )",
    "    )",
    "",
    "RETURN",
    "SWITCH(",
    "    TRUE(),",
    "    _IsFilteredByPerson, _BySalesPerson,",
    "    _ByRegion",
    ")"
  ],
  "formatString": "#,0",
  "displayFolder": "Sales Invoice",
  "annotations": [
    {
      "name": "TabularEditor_InPerspective",
      "value": "[\"Generic Sales\"]"
    }
  ]
}